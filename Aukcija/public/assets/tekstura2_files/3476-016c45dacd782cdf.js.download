!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="adc8eaf5-c93d-47df-bfa8-ffed4bf18035",n._sentryDebugIdIdentifier="sentry-dbid-adc8eaf5-c93d-47df-bfa8-ffed4bf18035")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3476],{10184:function(n,e,t){t.d(e,{G:function(){return l}});let o=["EN","US","KR","JP","IN","TH"],r=["DE","NL","IT"],i=["EN","US","KR","IN","JP"],u=["FR","ES","RU","BR","PL"],c=["KR","FR","RU","JP","IT"],l=(n,e,t)=>{let l=n.toUpperCase(),d=e>=1e4||c.includes(l);return new Intl.NumberFormat("EN",{style:"decimal",...t,useGrouping:d}).formatToParts(e).map(n=>"group"===n.type?r.includes(l)?".":i.includes(l)?",":u.includes(l)?"\xa0":"":"decimal"===n.type?o.includes(l)?".":",":n.value).join("")}},65791:function(n,e,t){t.d(e,{J:function(){return u}});var o=t(10184);let r=["NL"],i=(n,e)=>{let t="KR"===n.toUpperCase(),o=(null==e?void 0:e.toUpperCase())==="JPY";return t||o?{maximumFractionDigits:0}:{minimumFractionDigits:2,maximumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}},u=n=>{let{country:e,currency:t,price:u,options:c}=n,l=e.toUpperCase(),d=(0,o.G)(e,u,{...i(e,t),...c});return"RU"===l&&"EUR"===t?"".concat(d,"\xa0евро"):r.includes(l)?"".concat(t,"\xa0").concat(d):"".concat(d,"\xa0").concat(t)}},32625:function(n,e,t){var o=t(97458);e.Z=n=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...n,children:(0,o.jsx)("path",{d:"M363.9 204c-3.9-9.3-13-15.4-23.1-15.4H171.1c-10.1 0-19.2 6.1-23.1 15.4s-1.7 20.1 5.4 27.2l84.9 84.9c4.9 4.9 11.3 7.3 17.7 7.3s12.8-2.4 17.7-7.3l84.9-84.9c7.1-7.1 9.2-17.9 5.3-27.2"})})},11091:function(n,e,t){var o=t(97458);e.Z=n=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...n,children:[(0,o.jsx)("path",{d:"M442.139 362.501C454.18 360.479 463 350.056 463 337.846V276c0-30.327-24.673-55-55-55H6c-30.327 0-55 24.673-55 55v61.846c0 12.21 8.82 22.634 20.862 24.655C-11.254 365.335 1 379.844 1 397s-12.254 31.665-29.138 34.499C-40.18 433.521-49 443.944-49 456.154V518c0 30.327 24.673 55 55 55h402c30.327 0 55-24.673 55-55v-61.846c0-12.21-8.82-22.634-20.861-24.655C425.255 428.665 413 414.156 413 397s12.255-31.665 29.139-34.499M413 319.492c-29.912 13.415-50 43.297-50 77.508s20.088 64.093 50 77.508V518c0 2.757-2.243 5-5 5H151v-25c0-13.808-11.193-25-25-25s-25 11.192-25 25v25H6c-2.757 0-5-2.243-5-5v-43.492C30.913 461.093 51 431.211 51 397s-20.087-64.093-50-77.508V276c0-2.757 2.243-5 5-5h95v25c0 13.808 11.193 25 25 25s25-11.192 25-25v-25h257c2.757 0 5 2.243 5 5z"}),(0,o.jsx)("path",{d:"M126 357c-13.807 0-25 11.192-25 25v30c0 13.808 11.193 25 25 25s25-11.192 25-25v-30c0-13.808-11.193-25-25-25"})]})},93656:function(n,e,t){t.d(e,{W:function(){return r},x:function(){return o}});let o="addons",r={"FR-PACKA":"FR-PACKA"}},22503:function(n,e,t){t.d(e,{Jh:function(){return E},K7:function(){return D},DG:function(){return f},D2:function(){return O},pA:function(){return h},al:function(){return y.a},Ed:function(){return R}});var o=t(97458),r=t(93165),i=t(18166),u=t(32748),c=t(52983),l=t(93656),d=t(1850);let a=d.z.object({coupon_id:d.z.string().optional(),coupon_description:d.z.string().optional(),coupon_type:d.z.string().optional(),coupon_value:d.z.number().optional(),coupon_price_calculated:d.z.number().optional()}),s=d.z.object({tax:d.z.number(),import_taxes:d.z.number(),total_price:d.z.number()}),S=d.z.object({brand:d.z.string(),masked_number:d.z.string()}),p=d.z.object({product_product_code:d.z.string(),price_id:d.z.string(),price_currency:d.z.string(),price_amount_cents:d.z.number(),price_coupon:a,price_seats:d.z.number()}),M=d.z.object({addons:d.z.array(p),credits:d.z.number(),total_credits:d.z.number(),price_base_amount_cents:d.z.number(),price_base_coupon_price_calculated:d.z.number().nullable(),price_coupon_discount:d.z.number().nullable(),hasAutoRefill:d.z.boolean().optional(),subscription_id:d.z.string(),tax_info:s,pay_method:S}),L="/api/pricing-plans/addons",v=async n=>{let{userId:e}=n;try{var t;let n=null!==(t=new URLSearchParams(window.location.search).get("coupon"))&&void 0!==t?t:"",o=await fetch(L,{method:"POST",body:JSON.stringify({customerId:e,addons:[{productType:l.W["FR-PACKA"],quantity:1}],couponId:n})});if(!o.ok)return{success:!1};let r=await o.json(),i=M.parse(r);return{success:!0,data:i}}catch(n){return{success:!1}}},C=async n=>{let{userId:e,couponId:t,addons:o}=n;try{let n=await fetch(L,{method:"POST",body:JSON.stringify({customerId:e,addons:o,couponId:t})});if(!n.ok)return{success:!1};let r=await n.json(),i=M.parse(r);return{success:!0,data:i}}catch(n){return{success:!1}}},_=async n=>{let{userId:e,priceId:t,subscriptionId:o,quantity:r,couponId:i,autoRenewal:u}=n;try{return{success:(await fetch("".concat(L,"/confirm-payment"),{method:"POST",body:JSON.stringify({customerId:e,priceId:t,subscriptionId:o,quantity:r,couponId:i,autoRenewal:u})})).ok}}catch(n){return{success:!1}}},A={purchased:"purchased",sessionReady:"sessionReady",error:"error"},I=(0,c.createContext)(null),D=n=>{let{children:e,userId:t}=n,{t:d}=(0,u.$G)(l.x),[a,s]=(0,c.useState)(null),[S,p]=(0,c.useState)(""),[M,L]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[f,m]=(0,c.useState)(!1),[B,O]=(0,c.useState)(null),Y=(0,c.useCallback)((n,e)=>{let t={action:A[n],...e&&{error:e}};window.parent.postMessage(t)},[]);(0,c.useEffect)(()=>{(async()=>{let n=await v({userId:t});if(n.success){var e,o,r;s(n.data),E(null!==(o=n.data.hasAutoRefill)&&void 0!==o&&o),p(null!==(r=null===(e=n.data.addons[0].price_coupon)||void 0===e?void 0:e.coupon_id)&&void 0!==r?r:""),Y("sessionReady")}else Y("error","Something went wrong while fetching the addons' prices")})()},[t,Y]);let h=(0,c.useCallback)(async()=>{var n,e,o,r;let u=null==a?void 0:a.addons[0];if(L(!0),m(!1),O(null),!(await _({userId:t,priceId:null!==(e=null==u?void 0:u.price_id)&&void 0!==e?e:"",subscriptionId:null!==(o=null==a?void 0:a.subscription_id)&&void 0!==o?o:"",quantity:null!==(r=null==u?void 0:u.price_seats)&&void 0!==r?r:0,couponId:null==u?void 0:null===(n=u.price_coupon)||void 0===n?void 0:n.coupon_id,autoRenewal:D})).success){L(!1),m(!1),O(d("errorConfirmPayment")),Y("error","Something went wrong while confirming payment");return}L(!1),m(!0),O(null),(0,i.sendGTMEvent)({event:"ga4event",event_name:"credits_purchase",quantity:null==u?void 0:u.price_seats,auto_refil:D}),Y("purchased")},[null==a?void 0:a.addons,null==a?void 0:a.subscription_id,t,D,Y,d]),y=(0,c.useCallback)(async(n,e)=>{let o=null==a?void 0:a.addons.map(t=>{let o=t.product_product_code===n;return{productType:t.product_product_code,quantity:o?e:t.price_seats}}),r=await C({addons:null!=o?o:[],couponId:S,userId:t});r.success&&s(r.data)},[null==a?void 0:a.addons,t,S]),b=(0,c.useCallback)(async n=>{let e=null==a?void 0:a.addons.map(n=>({productType:n.product_product_code,quantity:n.price_seats})),o=await C({addons:null!=e?e:[],couponId:n,userId:t});if(!o.success)return!1;{let e=o.data.addons.some(e=>{var t;return(null===(t=e.price_coupon)||void 0===t?void 0:t.coupon_id)===n});return(s(o.data),e)?(p(n),!0):(p(""),!1)}},[null==a?void 0:a.addons,t]),R=(0,c.useMemo)(()=>a?a.addons.map(n=>{var e,t,o,i;let u=a.price_base_amount_cents,c=null!==(o=a.price_base_coupon_price_calculated)&&void 0!==o?o:0,l=null===(e=n.price_coupon)||void 0===e?void 0:e.coupon_id;return{discount:null!==(i=null===(t=n.price_coupon)||void 0===t?void 0:t.coupon_value)&&void 0!==i?i:0,currency:n.price_currency,name:n.product_product_code,price:(0,r.G)(u,n.price_currency),priceCoupon:l?(0,r.G)(c,n.price_currency):0,quantity:n.price_seats,credits:a.credits}}):[],[a]),w=(0,c.useMemo)(()=>{var n,e,t,o,i,u,c,l,d,s;let S=null==a?void 0:a.addons[0],p=null!==(n=null==S?void 0:S.price_currency)&&void 0!==n?n:"EUR";return{currency:p,totalCredits:null!==(e=null==a?void 0:a.total_credits)&&void 0!==e?e:0,credits:null!==(t=null==a?void 0:a.credits)&&void 0!==t?t:0,subtotalPrice:(0,r.G)(null!==(o=null==S?void 0:S.price_amount_cents)&&void 0!==o?o:0,p),totalPrice:(0,r.G)(null!==(i=null==S?void 0:S.price_amount_cents)&&void 0!==i?i:0,p),coupon:null==S?void 0:S.price_coupon,priceCouponDiscount:(0,r.G)(null!==(u=null==a?void 0:a.price_coupon_discount)&&void 0!==u?u:0,p),taxInfo:{tax:null!==(c=null==a?void 0:a.tax_info.tax)&&void 0!==c?c:0,importTaxes:(0,r.G)(null!==(l=null==a?void 0:a.tax_info.import_taxes)&&void 0!==l?l:0,p),totalPrice:(0,r.G)(null!==(d=null==a?void 0:a.tax_info.total_price)&&void 0!==d?d:0,p)},paymentMethod:"".concat(null==a?void 0:a.pay_method.brand," ").concat(null==a?void 0:a.pay_method.masked_number)||"-",hasAutoRefill:null!==(s=null==a?void 0:a.hasAutoRefill)&&void 0!==s&&s}},[null==a?void 0:a.addons,null==a?void 0:a.credits,null==a?void 0:a.hasAutoRefill,null==a?void 0:a.pay_method.brand,null==a?void 0:a.pay_method.masked_number,null==a?void 0:a.price_coupon_discount,null==a?void 0:a.tax_info.import_taxes,null==a?void 0:a.tax_info.tax,null==a?void 0:a.tax_info.total_price,null==a?void 0:a.total_credits]),g=M||(null==a?void 0:a.total_credits)===0,x=(0,c.useMemo)(()=>({isConfirmDisabled:g,isAutoRefill:D,offers:R,paymentSummary:w,validCoupon:S,isPurchased:f,error:B,onApplyCoupon:b,onChangeQuantity:y,onConfirmPayment:h,onAutoRefillChange:()=>E(n=>!n)}),[b,y,h,g,D,R,w,S,f,B]);return(0,o.jsx)(I.Provider,{value:x,children:e})},E=n=>{let{children:e}=n;return(0,o.jsx)(I.Consumer,{children:n=>{if(!n)throw Error("AddonsConsumer must be used within a AddonsProvider");return e(n)}})},f=()=>{let n=(0,c.useContext)(I);if(!n)throw Error("useAddons must be used within a AddonsProvider");return n};var m=t(30997),B=t(10184);let O=n=>{let{value:e}=n,t=(0,m.N)();return t?(0,B.G)(t,e):null};var Y=t(65791);let h=n=>{let{price:e,currency:t}=n,o=(0,m.N)();return o?(0,Y.J)({country:o,price:e,currency:t}):null};var y=t(8215),b=t(37904);let R=()=>{let{isPremiumPlus:n}=(0,b.hr)();return n}},28812:function(n,e,t){t.d(e,{o:function(){return i}});var o=t(7616);let r=(0,t(24399).cn)(!1),i=()=>{let[n,e]=(0,o.KO)(r);return{isOpenAddonsModal:n,showAddonsModal:()=>e(!0),hideAddonsModal:()=>e(!1)}}},8215:function(n,e,t){t.d(e,{a:function(){return u}});var o=t(20527),r=t(52983),i=t(28812);let u=n=>{let{showAddonsModal:e}=(0,i.o)(),[,t]=(0,o.n)({location:n,action:"get_credits"});return(0,r.useCallback)(()=>{t(),e()},[e,t])}},93165:function(n,e,t){t.d(e,{G:function(){return r}});let o={ARS:{SYMBOL:"$",DECIMALS:2},AUD:{SYMBOL:"$",DECIMALS:2},THB:{SYMBOL:"฿",DECIMALS:2},BOB:{SYMBOL:"Bs",DECIMALS:2},BRL:{SYMBOL:"R$",DECIMALS:2},CAD:{SYMBOL:"$",DECIMALS:2},CLP:{SYMBOL:"$",DECIMALS:0},COP:{SYMBOL:"$",DECIMALS:2},CRC:{SYMBOL:"₡",DECIMALS:2},HRK:{SYMBOL:"kn",DECIMALS:2},CZK:{SYMBOL:"Kč",DECIMALS:2},DKK:{SYMBOL:"kr",DECIMALS:2},USD:{SYMBOL:"$",DECIMALS:2},EGP:{SYMBOL:"\xa3",DECIMALS:2},AED:{SYMBOL:"د.إ",DECIMALS:2},EUR:{SYMBOL:"€",DECIMALS:2},GTQ:{SYMBOL:"Q",DECIMALS:2},HNL:{SYMBOL:"L",DECIMALS:2},HKD:{SYMBOL:"HK$",DECIMALS:2},UAH:{SYMBOL:"₴",DECIMALS:2},HUF:{SYMBOL:"Ft",DECIMALS:2},IDR:{SYMBOL:"Rp",DECIMALS:2},KES:{SYMBOL:"KSh",DECIMALS:2},MMK:{SYMBOL:"Ks",DECIMALS:2},KGS:{SYMBOL:"с",DECIMALS:2},LBP:{SYMBOL:"\xa3",DECIMALS:2},RON:{SYMBOL:"lei",DECIMALS:2},BGN:{SYMBOL:"лв",DECIMALS:2},MYR:{SYMBOL:"RM",DECIMALS:2},AZN:{SYMBOL:"₼",DECIMALS:2},MXN:{SYMBOL:"$",DECIMALS:2},MAD:{SYMBOL:"د.م.",DECIMALS:2},NGN:{SYMBOL:"₦",DECIMALS:2},NZD:{SYMBOL:"$",DECIMALS:2},NIO:{SYMBOL:"C$",DECIMALS:2},NOK:{SYMBOL:"kr",DECIMALS:2},PKR:{SYMBOL:"₨",DECIMALS:2},PAB:{SYMBOL:"B/.",DECIMALS:2},PEN:{SYMBOL:"S/.",DECIMALS:2},PHP:{SYMBOL:"₱",DECIMALS:2},GBP:{SYMBOL:"\xa3",DECIMALS:2},QAR:{SYMBOL:"﷼",DECIMALS:2},INR:{SYMBOL:"₹",DECIMALS:2},SAR:{SYMBOL:"﷼",DECIMALS:2},RSD:{SYMBOL:"дин.",DECIMALS:2},ILS:{SYMBOL:"₪",DECIMALS:2},SGD:{SYMBOL:"S$",DECIMALS:2},ZAR:{SYMBOL:"R",DECIMALS:2},KRW:{SYMBOL:"₩",DECIMALS:0},LKR:{SYMBOL:"₨",DECIMALS:2},SEK:{SYMBOL:"kr",DECIMALS:2},CHF:{SYMBOL:"CHF",DECIMALS:2},TWD:{SYMBOL:"NT$",DECIMALS:2},BDT:{SYMBOL:"৳",DECIMALS:2},TZS:{SYMBOL:"TSh",DECIMALS:2},KZT:{SYMBOL:"₸",DECIMALS:2},TRY:{SYMBOL:"₺",DECIMALS:2},UYU:{SYMBOL:"$U",DECIMALS:2},UZS:{SYMBOL:"лв",DECIMALS:2},VND:{SYMBOL:"₫",DECIMALS:2},XOF:{SYMBOL:"CFA",DECIMALS:2},JPY:{SYMBOL:"\xa5",DECIMALS:0},CNY:{SYMBOL:"\xa5",DECIMALS:2},PLN:{SYMBOL:"zł",DECIMALS:2}},r=(n,e)=>{var t,r;return n/10**(null!==(r=null===(t=o[e])||void 0===t?void 0:t.DECIMALS)&&void 0!==r?r:2)}}}]);